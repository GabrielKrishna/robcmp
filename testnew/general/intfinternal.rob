
interface bus {
	void setup(int32 speed);
	void write(int8 b);
}

type mcu {

	spi = bus {
		speed = int32(0);
		lastb = 0;

		void setup(int32 s) {
			speed = s;
		}

		void write(int8 b) {
			lastb = b;
		}
	}
}

int16 main() {
	m = mcu();
	spi = m.spi;

	if spi.speed != 0 or spi.lastb != 0 {
		return 1;
	}

	spi.setup(1000);
	spi.write(8);
	
	if spi.speed != 1000 or spi.lastb != 8 {
		return 1;
	}

	return 0;
}

